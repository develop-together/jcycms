function viewLayer(e,t,i,a){e||(e=2),0==a.length&&(a={width:"800px",height:"500px"}),layer.open({type:2,title:i.attr("title"),maxmin:!0,shadeClose:!0,area:[a.width,a.height],content:t})}function close_tab(){$(".J_menuTab",parent.document).each(function(e){$(this).hasClass("active")&&($(this).prev("a.J_menuTab").length>0&&$(this).prev("a.J_menuTab").eq(0).addClass("active"),$(this).remove(),parent.$(".J_iframe").eq(e).prev("iframe.J_iframe").length>0&&parent.$(".J_iframe").eq(e).prev("iframe.J_iframe").eq(0).show(),parent.$(".J_iframe").eq(e).remove())})}function showPhotos(e,t){t=t||5;var i=JSON.parse($(e).attr("data"));layer.photos({photos:i,shift:t})}function reloadImageList(e,t){if(e.parent().attr("class").indexOf("image")>=0){if(!/image\/\w+/.test(t.type))return layer.tips(tips.onlyPictureCanBeSelected,e.parent()),!1;var i=new FileReader;i.readAsDataURL(t),i.onload=function(t){var i="200px",a="200px";$(e).css("max-width")&&(i=$(e).css("max-width")),$(e).css("max-width")&&(a=$(e).css("max-height")),e.parents("div.image").children("img.none_image").remove(),e.parents("div.image").append("<img src='"+this.result+"' style='max-width:"+i+";max-height:"+a+"' class='upload_image_lists'/>")}}}!function(){var e=function(){this.ajax=function(e,t,i,a,n,s,o,r,l){o=o||3e4,s=s||!0,r=r||!1;var c={type:e,url:t,data:i,async:s,timeout:o,dataType:a,success:function(e){n&&"function"==typeof n&&n(e)},error:function(e,t,i){if(l&&"function"==typeof l)l(e,t,i);else{if("timeout"===t)return void swal(tips.error+": timeout!");e.responseJSON&&e.responseJSON.hasOwnProperty("message")&&swal(tips.error+": "+e.responseJSON.message,tips.operatingFailed+".","error")}}};"post"==e.toLowerCase()&&("[object FormData]"===Object.prototype.toString.call(i)||r?(i.append("_csrf_backend",$("meta[name='csrf-token']").attr("content")),c.processData=!1,c.contentType=!1,c.xhr=function(){return myXhr=$.ajaxSettings.xhr(),myXhr.upload&&myXhr.upload.addEventListener("progress",function(e){e=window.event||e;var t=Math.round(100*e.loaded/e.total);console.log("上传完成时间：",t)},!1),myXhr}):i._csrf_backend=$("meta[name='csrf-token']").attr("content"));jQuery.ajax(c)},this.callback=function(e,t,i){t=!this._null(t)||"ok",i=!this._null(i)||!1;var a=[{state:"ok",statusCode:200,message:"操作成功"},{state:"error",statusCode:300,message:"操作失败"},{state:"timeout",statusCode:301,message:"操作超时"}],n=200;for(var s in a)t==a[s].state&&(n=a[s].statusCode,e=this._null(e)||a[s].message);var o=200==n?1:2,r=layer.alert(e,{icon:o},function(){i&&200==n&&setTimeout(function(){layer.close(r),layer.closeAll("loading")},1e3)})},this._null=function(e){return null==e||"undefined"==e||"undefined"==typeof e},this.datum={},this.autocomplete=function(e,t){if(!t.data&&t.url){t.url.indexOf("?search=%QUERY")==-1&&(t.url.indexOf("&")!=-1?t.url+="&keyword=%QUERY%":t.url+="?keyword=%QUERY%"),console.log("options.displayKey",t.displayKey);var i={datumTokenizer:Bloodhound.tokenizers.obj.whitespace(t.displayKey),queryTokenizer:Bloodhound.tokenizers.whitespace};t.isCache?i.prefetch=t.url:i.remote={url:t.url,wildcard:"%QUERY%"},this.datum=new Bloodhound(i)}else this.datum=new Bloodhound({datumTokenizer:function(e){return e[t.displayKey]},queryTokenizer:Bloodhound.tokenizers.whitespace,local:t.data,identify:function(e){return e[t.valueKey]}});this.datum.initialize();jQuery(".typeahead-"+e).typeahead({hint:!0,highlight:!0},{name:t.name,displayKey:t.displayKey,limit:parseInt(t.limit),source:baseUtil.nflTeamsWithDefaults}).on("typeahead:select",function(e,i){$("#"+t.selectedDomId).val(i[t.valueKey])}).on("typeahead:asyncrequest",function(){}).on("typeahead:asynccancel typeahead:asyncreceive",function(e){})},this.nflTeamsWithDefaults=function(e,t,i){this.datum.search(e,t,i)}},t=new e;window.jcms=t}(window),yii.confirm=function(e,t,i){var a=$(this).attr("href"),n=$(this).attr("data-pjax")?$(this).attr("data-pjax"):0,s=$(this).attr("data-method")?$(this).attr("data-method"):"get";a&&"javascript:;"!=a&&"#"!=a||i(),swal({title:e,text:tips.realyToDo,type:"warning",showCancelButton:!0,confirmButtonColor:"#DD6B55",cancelButtonText:tips.cancel,confirmButtonText:tips.ok,closeOnConfirm:!1},function(e){e?parseInt(n)?!t||t():(swal(tips.waitingAndNoRefresh,tips.operating+"...","success"),$.ajax({url:a,dataType:"json",type:s,success:function(e){200==e.code?(swal(tips.success+"!",tips.operatingSuccess+".","success"),location.reload()):swal(tips.error+": "+e.message,tips.operatingFailed+".","error")},error:function(e,t,i){swal(tips.error+": "+e.responseJSON.message,tips.operatingFailed+".","error")}})):!i||i()})},$(document).ready(function(){$(".multi-operate").click(function(){var e=$(this).attr("href"),t=new Array;return $("tr td input[type=checkbox]:checked").each(function(){t.push($(this).val())}),t.length<=0?(swal(tips.noItemSelected,tips.PleaseSelectOne),!1):(t=t.join(","),swal({title:$(this).attr("data-confirm"),text:t,type:"warning",showCancelButton:!0,confirmButtonColor:"#DD6B55",cancelButtonText:tips.cancel,confirmButtonText:tips.ok,closeOnConfirm:!1},function(i){return!!i&&(swal(tips.waitingAndNoRefresh,tips.operating+"...","success"),void $.ajax({url:e,dataType:"json",type:"get",data:{id:t},success:function(e){200==e.code?(swal(tips.success+"!",tips.operatingSuccess+".","success"),location.reload()):swal(tips.error+": "+e.message,tips.operatingFailed+".","error")},error:function(e,t,i){swal(tips.error+": "+e.responseJSON.message,tips.operatingFailed+".","error")}}))}),!1)}),$("a.close-link").click(function(){var e=$(this).parents("div.ibox:first");e.hide(),0==e.length&&($(this).parents("div.ibox-title").hide(),$(this).parents("div.ibox-title:first").next().hide()),$(this).parents("div.ibox:first").hide()}),$("a.collapse-link").click(function(){var e=$(this).parents("div.ibox:first").children("div.ibox-content");e.slideToggle();var t=$(this).children("i:first").attr("class");"fa fa-chevron-up"==t?$(this).children("i:first").attr("class","fa fa-chevron-down"):$(this).children("i:first").attr("class","fa fa-chevron-up"),0==e.length&&$(this).parents("div.ibox-title:first").next().slideToggle()}),$("a.refresh").click(function(){return location.reload(),!1}),$(".openContab").click(function(){return parent.openConTab($(this)),!1}),$("div.input-append").bind("click",function(e){e.preventDefault(),$("img.upload_image_lists")&&($("img.upload_image_lists").remove(),$(this).parents("div.image").children("div.input-append").children("input[type='text']").val("")),$(this).parent("div").find('input[type="file"]').click()}),$("input.feehi_html5_upload[type=file]").val()&&$("input.feehi_html5_upload[type=file]").val(""),$("input.feehi_html5_upload[type=file]").bind("change",function(){if("undefined"!=typeof FileReader){var e=$(this),t=$(this)[0].files,i=e.parent("div").find("input.filename_lists").val()?e.parent("div").find("input.filename_lists").val():"",a=null;if(t){e.parent("div").find("img.none_image").hide();for(var n in t)a=t[n],"object"==typeof a&&(i+=a.name+"、",reloadImageList(e,a))}else e.parent("div").find("img.none_image").show();e.parents("div.image").children("div.input-append").children("input[type='text']").val(i.substr(0,i.length-1))}}),$("div.photos_list").length&&$("div.photos_list").bind("click",function(){showPhotos(this,3)});var e=$(".pjax-reload");e.length&&(e.on("pjax:send",function(e){layer.load(2)}),e.on("pjax:complete",function(e){layer.closeAll("loading"),$("table tr td a.title").bind("mouseover mouseout",function(){showPhotos(this)})})),$(".clear-search").on("click",function(){var e=$(this).closest("form").attr("action");window.location.href=e})});